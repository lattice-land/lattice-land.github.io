<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Lattice Land Powerdomains Library: include/lala/bab.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Lattice Land Powerdomains Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function() { init_codefold(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('bab_8hpp_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">bab.hpp</div></div>
</div><!--header-->
<div class="contents">
<a href="bab_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2022 Pierre Talbot</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#ifndef LALA_POWER_BAB_HPP</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="preprocessor">#define LALA_POWER_BAB_HPP</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span> </div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &quot;battery/vector.hpp&quot;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;battery/shared_ptr.hpp&quot;</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;lala/logic/logic.hpp&quot;</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;lala/universes/primitive_upset.hpp&quot;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;lala/abstract_deps.hpp&quot;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;lala/vstore.hpp&quot;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span> </div>
<div class="foldopen" id="foldopen00013" data-start="{" data-end="}">
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno"><a class="line" href="namespacelala.html">   13</a></span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacelala.html">lala</a> {</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> A, <span class="keyword">class</span> B&gt; <span class="keyword">class </span><a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB</a>;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">namespace </span>impl {</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span>&gt;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>  <span class="keyword">struct </span>is_bab_like {</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> value = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>  };</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span> A, <span class="keyword">class</span> B&gt;</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>  <span class="keyword">struct </span>is_bab_like&lt;<a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB</a>&lt;A, B&gt;&gt; {</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <span class="keyword">static</span> <span class="keyword">constexpr</span> <span class="keywordtype">bool</span> value = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>  };</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>}</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="keyword">template</span> &lt;<span class="keyword">class</span> A, <span class="keyword">class</span> B = A&gt;</div>
<div class="foldopen" id="foldopen00027" data-start="{" data-end="};">
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html">   27</a></span><span class="keyword">class </span><a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB</a> {</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a57d8e6938659398a9b0d09046f935923">   29</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a57d8e6938659398a9b0d09046f935923">allocator_type</a> = <span class="keyword">typename</span> A::allocator_type;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a52d692b00718e1681732044b066d1023">   30</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a52d692b00718e1681732044b066d1023">sub_type</a> = A;</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a2085ebdfa6a8a9a1993a17c2caa128f1">   31</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a2085ebdfa6a8a9a1993a17c2caa128f1">sub_ptr</a> = abstract_ptr&lt;sub_type&gt;;</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a54113a0d73ef95cf3b7d38667ef77c05">   32</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a54113a0d73ef95cf3b7d38667ef77c05">best_type</a> = B;</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">   33</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">best_ptr</a> = abstract_ptr&lt;best_type&gt;;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#aa0a455d0b38f0b43595ed5b2e9f9c418">   34</a></span>  <span class="keyword">using </span><a class="code hl_class" href="classlala_1_1_b_a_b.html">this_type</a> = <a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB&lt;sub_type, best_type&gt;</a>;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc2&gt;</div>
<div class="foldopen" id="foldopen00037" data-start="{" data-end="};">
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html">   37</a></span>  <span class="keyword">struct </span><a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type</a> {</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#a797438d0f1e11cd0d9ec4552a2b945cd">   38</a></span>    <span class="keyword">using </span><a class="code hl_typedef" href="structlala_1_1_b_a_b_1_1tell__type.html#a797438d0f1e11cd0d9ec4552a2b945cd">sub_tell_type</a> = sub_type::template <a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type&lt;Alloc2&gt;</a>;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">   39</a></span>    AVar <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">   40</a></span>    <span class="keywordtype">bool</span> <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">optimization_mode</a>;</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">   41</a></span>    battery::vector&lt;sub_tell_type, Alloc2&gt; <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#ae3494b3ccca077bbaf615b674e7434be">   42</a></span>    <a class="code hl_function" href="structlala_1_1_b_a_b_1_1tell__type.html#ae3494b3ccca077bbaf615b674e7434be">tell_type</a>() = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#ab083e1cc658b1761ebdbf361ffcf4b02">   43</a></span>    <a class="code hl_function" href="structlala_1_1_b_a_b_1_1tell__type.html#ab083e1cc658b1761ebdbf361ffcf4b02">tell_type</a>(<a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type&lt;Alloc2&gt;</a>&amp;&amp;) = <span class="keywordflow">default</span>;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#aac4e6ab16c4725c4180a8498dfda6405">   44</a></span>    <a class="code hl_function" href="structlala_1_1_b_a_b_1_1tell__type.html#aac4e6ab16c4725c4180a8498dfda6405">tell_type</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type&lt;Alloc2&gt;</a>&amp;) = <span class="keywordflow">default</span>;</div>
<div class="foldopen" id="foldopen00045" data-start="{" data-end="}">
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#a0986b184c880736f303ced708f056536">   45</a></span>    CUDA NI <a class="code hl_function" href="structlala_1_1_b_a_b_1_1tell__type.html#a0986b184c880736f303ced708f056536">tell_type</a>(AVar <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>, <span class="keywordtype">bool</span> opt, <span class="keyword">const</span> Alloc2&amp; alloc = Alloc2()):</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>      <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>(<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>), <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">optimization_mode</a>(opt), <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>(alloc) {}</div>
</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keyword">template</span> &lt;<span class="keyword">class</span> BABTellType&gt;</div>
<div class="foldopen" id="foldopen00049" data-start="{" data-end="}">
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#a4e83f2e08e2ce5225a046d7e2273617b">   49</a></span>    CUDA NI <a class="code hl_function" href="structlala_1_1_b_a_b_1_1tell__type.html#a4e83f2e08e2ce5225a046d7e2273617b">tell_type</a>(<span class="keyword">const</span> BABTellType&amp; other, <span class="keyword">const</span> Alloc2&amp; alloc = Alloc2()):</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>      <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>(other.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>), <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">optimization_mode</a>(other.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">optimization_mode</a>),</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>      <a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>(other.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>, alloc)</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>    {}</div>
</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc3&gt;</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="structlala_1_1_b_a_b_1_1tell__type.html#aacf03bed9da3ee52d604fcc0b851f8d9">   55</a></span>    <span class="keyword">friend</span> <span class="keyword">struct </span><a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  };</div>
</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc2&gt;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#aeaf2219142336c986ebef2e4eca225eb">   59</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#aeaf2219142336c986ebef2e4eca225eb">ask_type</a> = battery::vector&lt;typename sub_type::template ask_type&lt;Alloc2&gt;, Alloc2&gt;;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#ab21624fe56e6c564ba6102741835ff2e">   62</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#ab21624fe56e6c564ba6102741835ff2e">iresult_tell</a> = IResult&lt;tell_type&lt;typename Env::allocator_type&gt;, F&gt;;</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  <span class="keyword">template</span>&lt;<span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a403fd4162929ffb06a297ec373486e36">   65</a></span>  <span class="keyword">using </span><a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a403fd4162929ffb06a297ec373486e36">iresult_ask</a> = IResult&lt;ask_type&lt;typename Env::allocator_type&gt;, F&gt;;</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#ac33b3de5b64596a9094ef9d29dee1f26">   67</a></span>  <span class="keyword">constexpr</span> <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code hl_variable" href="classlala_1_1_b_a_b.html#ac33b3de5b64596a9094ef9d29dee1f26">name</a> = <span class="stringliteral">&quot;BAB&quot;</span>;</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span> </div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> A2, <span class="keyword">class</span> B2&gt;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#add650efe625b45c056934dab51b43915">   70</a></span>  <span class="keyword">friend</span> <span class="keyword">class </span><a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB</a>;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  AType atype;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a2085ebdfa6a8a9a1993a17c2caa128f1">sub_ptr</a> sub;</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">best_ptr</a> best;</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>  AVar x;</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>  <span class="keywordtype">bool</span> optimization_mode; <span class="comment">// `true` for minimization, `false` for maximization.</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>  <span class="keywordtype">int</span> solutions_found;</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span> </div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span><span class="keyword">public</span>:</div>
<div class="foldopen" id="foldopen00081" data-start="{" data-end="}">
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#aac053c32befc6c9260b29db7769f66e2">   81</a></span>  CUDA <a class="code hl_function" href="classlala_1_1_b_a_b.html#aac053c32befc6c9260b29db7769f66e2">BAB</a>(AType atype, <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a2085ebdfa6a8a9a1993a17c2caa128f1">sub_ptr</a> sub, <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">best_ptr</a> best)</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>   : atype(atype), sub(std::move(sub)), best(std::move(best)), x(),</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>     solutions_found(0)</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  {</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>    assert(this-&gt;sub);</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>    assert(this-&gt;best);</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>  }</div>
</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span><span class="comment"></span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span><span class="comment">  /** Construct BAB by copying `other`.</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span><span class="comment">   * The best solution is copied using a fresh AbstractDeps, and thus is not intended to be shared with other abstract domains.</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span><span class="comment">   * For instance, if `best` is a VStore, it shares the same AType than the VStore underlying `sub`.</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span><span class="comment">   * Hence, if we copy it using `deps`, both VStore will be shared which is not the intended behavior.</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span><span class="comment">   */</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <span class="keyword">template</span>&lt;<span class="keyword">class </span>A2, <span class="keyword">class </span>B2, <span class="keyword">class</span>... Allocators&gt;</div>
<div class="foldopen" id="foldopen00095" data-start="{" data-end="}">
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a8b714495f2df448c45c1bdc9d125cb82">   95</a></span>  CUDA NI <a class="code hl_function" href="classlala_1_1_b_a_b.html#a8b714495f2df448c45c1bdc9d125cb82">BAB</a>(<span class="keyword">const</span> <a class="code hl_class" href="classlala_1_1_b_a_b.html">BAB&lt;A2, B2&gt;</a>&amp; other, AbstractDeps&lt;Allocators...&gt;&amp; deps)</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>   : atype(other.atype)</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>   , sub(deps.template clone&lt;<a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a52d692b00718e1681732044b066d1023">sub_type</a>&gt;(other.sub))</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>   , x(other.x)</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>   , optimization_mode(other.optimization_mode)</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  {</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    AbstractDeps&lt;Allocators...&gt; deps_best(deps.template get_allocator&lt;Allocators&gt;()...);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    best = deps_best.template clone&lt;best_type&gt;(other.best);</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>  }</div>
</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span> </div>
<div class="foldopen" id="foldopen00105" data-start="{" data-end="}">
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">  105</a></span>  CUDA AType <a class="code hl_function" href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">aty</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">return</span> atype;</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>  }</div>
</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span> </div>
<div class="foldopen" id="foldopen00109" data-start="{" data-end="}">
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a269310af74a1427381d60bfbab3d1644">  109</a></span>  CUDA <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a57d8e6938659398a9b0d09046f935923">allocator_type</a> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a269310af74a1427381d60bfbab3d1644">get_allocator</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <span class="keywordflow">return</span> sub-&gt;get_allocator();</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  }</div>
</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="foldopen" id="foldopen00113" data-start="{" data-end="}">
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#af293d61952fe2e9eab3fc1d1867996b0">  113</a></span>  CUDA local::BInc <a class="code hl_function" href="classlala_1_1_b_a_b.html#af293d61952fe2e9eab3fc1d1867996b0">is_top</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordflow">return</span> sub-&gt;is_top();</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>  }</div>
</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="foldopen" id="foldopen00117" data-start="{" data-end="}">
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#aec5ab8e66756dac48599e2231b3d7b00">  117</a></span>  CUDA local::BDec <a class="code hl_function" href="classlala_1_1_b_a_b.html#aec5ab8e66756dac48599e2231b3d7b00">is_bot</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>    <span class="keywordflow">return</span> x.is_untyped() &amp;&amp; sub-&gt;is_bot();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>  }</div>
</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span><span class="keyword">private</span>:</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> is_tell, <span class="keyword">class</span> R, <span class="keyword">class</span> SubR, <span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>  CUDA NI <span class="keywordtype">void</span> interpret_sub(R&amp; res, SubR&amp; sub_res, <span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>    <span class="keywordflow">if</span>(!res.has_value()) {</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    }</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordflow">if</span>(sub_res.has_value()) {</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>      <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(is_tell) {</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        res.value().sub_tells.push_back(std::move(sub_res.value()));</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>      }</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        res.value().push_back(std::move(sub_res.value()));</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>      }</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>      res.join_warnings(std::move(sub_res));</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    }</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>      res.join_errors(std::move(sub_res));</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    }</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  }</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span> </div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  <span class="keyword">template</span> &lt;<span class="keywordtype">bool</span> is_tell, <span class="keyword">class</span> R, <span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  CUDA NI <span class="keywordtype">void</span> interpret_sub(R&amp; res, <span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(is_tell){</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>      <span class="keyword">auto</span> sub_res = sub-&gt;interpret_tell_in(f, env);</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>      interpret_sub&lt;is_tell&gt;(res, sub_res, f, env);</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    }</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>      <span class="keyword">auto</span> sub_res = sub-&gt;interpret_ask_in(f, env);</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      interpret_sub&lt;is_tell&gt;(res, sub_res, f, env);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>    }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>  }</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>  CUDA NI <span class="keywordtype">void</span> interpret_optimization_predicate(iresult_tell&lt;F, Env&gt;&amp; res, <span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    <span class="keywordflow">if</span>(f.is_untyped() || f.type() == <a class="code hl_function" href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">aty</a>()) {</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>      <span class="keywordflow">if</span>(f.is(F::Seq) &amp;&amp; (f.sig() == MAXIMIZE || f.sig() == MINIMIZE)) {</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        res.value().optimization_mode = f.sig() == MINIMIZE;</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        <span class="keywordflow">if</span>(f.seq(0).is_variable()) {</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>          <span class="keyword">auto</span> var_res = env.interpret(f.seq(0));</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>          <span class="keywordflow">if</span>(var_res.has_value()) {</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>            res.value().x = var_res.value();</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>          }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>          <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            res.join_errors(std::move(var_res));</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>          }</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        }</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>          res = iresult_tell&lt;F, Env&gt;(IError&lt;F&gt;(<span class="keyword">true</span>, <a class="code hl_variable" href="classlala_1_1_b_a_b.html#ac33b3de5b64596a9094ef9d29dee1f26">name</a>, <span class="stringliteral">&quot;Optimization predicates expect a variable to optimize. Instead, you can create a new variable with the expression to optimize.&quot;</span>, f));</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        }</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>      }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span>(f.type() == <a class="code hl_function" href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">aty</a>()) {</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        res = iresult_tell&lt;F, Env&gt;(IError&lt;F&gt;(<span class="keyword">true</span>, <a class="code hl_variable" href="classlala_1_1_b_a_b.html#ac33b3de5b64596a9094ef9d29dee1f26">name</a>, <span class="stringliteral">&quot;Unsupported formula.&quot;</span>, f));</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>      }</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    interpret_sub&lt;true&gt;(res, f, env);</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>  }</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span> </div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> R, <span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>  CUDA NI <span class="keywordtype">void</span> interpret_tell_in(R&amp; res, <span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="keywordflow">if</span>(!res.has_value()) {</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>      <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    }</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    <span class="keywordflow">if</span>(f.is_untyped() || f.type() == <a class="code hl_function" href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">aty</a>()) {</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>      <span class="keywordflow">if</span>(f.is(F::Seq) &amp;&amp; f.sig() == AND) {</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; f.seq().size(); ++i) {</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>          interpret_tell_in(res, f.seq(i), env);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        }</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>      }</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>      <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>        interpret_optimization_predicate(res, f, env);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>      }</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    }</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>      interpret_sub&lt;true&gt;(res, f, env);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    }</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>  }</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span><span class="keyword">public</span>:</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="foldopen" id="foldopen00202" data-start="{" data-end="}">
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#ad16c092f4c82e774039356b94d28d4ec">  202</a></span>  CUDA NI <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#ab21624fe56e6c564ba6102741835ff2e">iresult_tell&lt;F, Env&gt;</a> <a class="code hl_function" href="classlala_1_1_b_a_b.html#ad16c092f4c82e774039356b94d28d4ec">interpret_tell_in</a>(<span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>    <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#ab21624fe56e6c564ba6102741835ff2e">iresult_tell&lt;F, Env&gt;</a> res(<a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type&lt;typename Env::allocator_type&gt;</a>{});</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>    interpret_tell_in(res, f, env);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    <span class="keywordflow">return</span> std::move(res);</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  }</div>
</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> F, <span class="keyword">class</span> Env&gt;</div>
<div class="foldopen" id="foldopen00209" data-start="{" data-end="}">
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#ac9b35285040938ee7735f50ca7d4b083">  209</a></span>  CUDA NI <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a403fd4162929ffb06a297ec373486e36">iresult_ask&lt;F, Env&gt;</a> <a class="code hl_function" href="classlala_1_1_b_a_b.html#ac9b35285040938ee7735f50ca7d4b083">interpret_ask_in</a>(<span class="keyword">const</span> F&amp; f, Env&amp; env) {</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>    <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a403fd4162929ffb06a297ec373486e36">iresult_ask&lt;F, Env&gt;</a> res{env.get_allocator()};</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>    interpret_sub&lt;false&gt;(res, f, env);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>    <span class="keywordflow">return</span> std::move(res);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>  }</div>
</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span> </div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc, <span class="keyword">class</span> Mem&gt;</div>
<div class="foldopen" id="foldopen00216" data-start="{" data-end="}">
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#afbcc5801a31324de4b4ebeb8c82ac0c4">  216</a></span>  CUDA <a class="code hl_class" href="classlala_1_1_b_a_b.html">this_type</a>&amp; <a class="code hl_function" href="classlala_1_1_b_a_b.html#afbcc5801a31324de4b4ebeb8c82ac0c4">tell</a>(<span class="keyword">const</span> <a class="code hl_struct" href="structlala_1_1_b_a_b_1_1tell__type.html">tell_type&lt;Alloc&gt;</a>&amp; t, BInc&lt;Mem&gt;&amp; has_changed) {</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; t.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>.size(); ++i) {</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      sub-&gt;<a class="code hl_function" href="classlala_1_1_b_a_b.html#afbcc5801a31324de4b4ebeb8c82ac0c4">tell</a>(t.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">sub_tells</a>[i], has_changed);</div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>    }</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>    <span class="keywordflow">if</span>(!t.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>.is_untyped()) {</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>      assert(x.is_untyped()); <span class="comment">// multi-objective optimization not yet supported.</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      x = t.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">x</a>;</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>      optimization_mode = t.<a class="code hl_variable" href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">optimization_mode</a>;</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>      has_changed.tell_top();</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>    }</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>  }</div>
</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span> </div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc2&gt;</div>
<div class="foldopen" id="foldopen00230" data-start="{" data-end="}">
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a9887e0c3a6eea679ef8324887f4f4797">  230</a></span>  CUDA NI TFormula&lt;Alloc2&gt; <a class="code hl_function" href="classlala_1_1_b_a_b.html#a9887e0c3a6eea679ef8324887f4f4797">deinterpret_best_bound</a>(<span class="keyword">const</span> <span class="keyword">typename</span> best_type::universe_type&amp; best_bound, <span class="keyword">const</span> Alloc2&amp; alloc = Alloc2())<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <span class="keyword">using </span>F = TFormula&lt;Alloc2&gt;;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <span class="keywordflow">if</span>((<a class="code hl_function" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">is_minimization</a>() &amp;&amp; best_bound.lb().is_bot())</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>      ||(<a class="code hl_function" href="classlala_1_1_b_a_b.html#a2e04d3b131fea27d038d063250a5a191">is_maximization</a>() &amp;&amp; best_bound.ub().is_bot()))</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>    {</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>      <span class="keywordflow">return</span> F::make_true();</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>    }</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>    Sig optimize_sig = <a class="code hl_function" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">is_minimization</a>() ? LT : GT;</div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>    F constant = <a class="code hl_function" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">is_minimization</a>()</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      ? best_bound.lb().template deinterpret&lt;F&gt;()</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      : best_bound.ub().template deinterpret&lt;F&gt;();</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>    <span class="keywordflow">return</span> F::make_binary(F::make_avar(x), optimize_sig, constant, UNTYPED, alloc);</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>  }</div>
</div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span> </div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Alloc2&gt;</div>
<div class="foldopen" id="foldopen00245" data-start="{" data-end="}">
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a09358295526fd2dde7e24fa45c3a754e">  245</a></span>  CUDA TFormula&lt;Alloc2&gt; <a class="code hl_function" href="classlala_1_1_b_a_b.html#a09358295526fd2dde7e24fa45c3a754e">deinterpret_best_bound</a>(<span class="keyword">const</span> Alloc2&amp; alloc = Alloc2())<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a9887e0c3a6eea679ef8324887f4f4797">deinterpret_best_bound</a>(best-&gt;project(x), alloc);</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>  }</div>
</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span><span class="comment"></span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span><span class="comment">  /** Update the variable to optimize `objective_var()` with a new bound. */</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Mem&gt;</div>
<div class="foldopen" id="foldopen00251" data-start="{" data-end="}">
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a06c807636032bee053d198de45e86caa">  251</a></span>  CUDA <a class="code hl_class" href="classlala_1_1_b_a_b.html">this_type</a>&amp; <a class="code hl_function" href="classlala_1_1_b_a_b.html#a06c807636032bee053d198de45e86caa">tell</a>(<span class="keyword">const</span> <span class="keyword">typename</span> best_type::universe_type&amp; best_bound, BInc&lt;Mem&gt;&amp; has_changed) {</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>    VarEnv&lt;allocator_type&gt; empty_env{};</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>    <span class="keyword">auto</span> bound_formula = <a class="code hl_function" href="classlala_1_1_b_a_b.html#a9887e0c3a6eea679ef8324887f4f4797">deinterpret_best_bound</a>(best_bound, <a class="code hl_function" href="classlala_1_1_b_a_b.html#a269310af74a1427381d60bfbab3d1644">get_allocator</a>());</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>    <span class="keyword">auto</span> t = sub-&gt;interpret_tell_in(bound_formula, empty_env).value();</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    sub-&gt;tell(t, has_changed);</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>    <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>  }</div>
</div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span><span class="comment"></span> </div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span><span class="comment">  /** Compare the best bound of two stores on the objective variable represented in this BAB abstract element.</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span><span class="comment">   * \return `true` if `store1` is strictly better than `store2`, false otherwise.</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span><span class="comment">  */</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Store1, <span class="keyword">class</span> Store2&gt;</div>
<div class="foldopen" id="foldopen00263" data-start="{" data-end="}">
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a9d275cd2a5ac04ac3d0054d00d975500">  263</a></span>  CUDA <span class="keywordtype">bool</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a9d275cd2a5ac04ac3d0054d00d975500">compare_bound</a>(<span class="keyword">const</span> Store1&amp; store1, <span class="keyword">const</span> Store2&amp; store2)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bound1 = store1.project(x);</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>    <span class="keyword">const</span> <span class="keyword">auto</span>&amp; bound2 = store2.project(x);</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>    <span class="keyword">using </span>LB = <span class="keyword">typename</span> Store1::universe_type::LB;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>    <span class="keyword">using </span>UB = <span class="keyword">typename</span> Store1::universe_type::UB;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    <span class="comment">// When minimizing, the best bound is getting smaller and smaller, hence the order over LB is not suited, we must compare the bound in UB which represents this fact.</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>    <span class="comment">// And dually for maximization.</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">is_minimization</a>()) {</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>      <span class="keywordflow">return</span> dual&lt;UB&gt;(bound1.lb()) &gt; dual&lt;UB&gt;(bound2.lb());</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>    }</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>      <span class="keywordflow">return</span> dual&lt;LB&gt;(bound1.ub()) &gt; dual&lt;LB&gt;(bound2.ub());</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>    }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>  }</div>
</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span><span class="comment"></span> </div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span><span class="comment">  /** This refinement operator performs &quot;branch-and-bound&quot; by adding a constraint to the root node of the search tree to ensure the next solution is better than the current one, and store the best solution found.</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="comment">   * \pre The current subelement must be extractable, and have a better bound than `best` (this is not checked here).</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span><span class="comment">   * Beware this refinement operator is not idempotent (it must only be called once on each new solution).</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span><span class="comment">   */</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> Mem&gt;</div>
<div class="foldopen" id="foldopen00283" data-start="{" data-end="}">
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a1368cb2d5f3eda4acfb960b4f69de09f">  283</a></span>  CUDA <span class="keywordtype">void</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a1368cb2d5f3eda4acfb960b4f69de09f">refine</a>(BInc&lt;Mem&gt;&amp; has_changed) {</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>    <span class="keywordflow">if</span>(!x.is_untyped()) {</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>      sub-&gt;extract(*best);</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>      solutions_found++;</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>      <a class="code hl_function" href="classlala_1_1_b_a_b.html#afbcc5801a31324de4b4ebeb8c82ac0c4">tell</a>(best-&gt;project(x), has_changed);</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    }</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>  }</div>
</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="foldopen" id="foldopen00291" data-start="{" data-end="}">
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a0b226f95cb1bde48b221f37b8c8356b0">  291</a></span>  CUDA <span class="keywordtype">int</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a0b226f95cb1bde48b221f37b8c8356b0">solutions_count</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>    <span class="keywordflow">return</span> solutions_found;</div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>  }</div>
</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span><span class="comment"></span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span><span class="comment">  /** Given an optimization problem, it is extractable only when we have explored the whole state space (indicated by the subdomain being equal to top), we have found one solution, and that solution is extractable. */</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> ExtractionStrategy = NonAtomicExtraction&gt;</div>
<div class="foldopen" id="foldopen00297" data-start="{" data-end="}">
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#af87d971b6c9bfebf4ebb2c5e38636312">  297</a></span>  CUDA <span class="keywordtype">bool</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#af87d971b6c9bfebf4ebb2c5e38636312">is_extractable</a>(<span class="keyword">const</span> ExtractionStrategy&amp; strategy = ExtractionStrategy())<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>    <span class="keywordflow">return</span> solutions_found &gt; 0 &amp;&amp; sub-&gt;is_top() &amp;&amp; best-&gt;is_extractable(strategy);</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>  }</div>
</div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span><span class="comment"></span> </div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span><span class="comment">  /** Extract the best solution found in `ua`.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span><span class="comment">   * \pre `is_extractable()` must return `true`. */</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>  <span class="keyword">template</span> &lt;<span class="keyword">class</span> AbstractBest&gt;</div>
<div class="foldopen" id="foldopen00304" data-start="{" data-end="}">
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a9276a66e78e07240a0f5f1290ed2d8dc">  304</a></span>  CUDA <span class="keywordtype">void</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a9276a66e78e07240a0f5f1290ed2d8dc">extract</a>(AbstractBest&amp; ua)<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    <span class="keywordflow">if</span> <span class="keyword">constexpr</span>(impl::is_bab_like&lt;AbstractBest&gt;::value) {</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>      best-&gt;extract(*(ua.best));</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>      ua.solutions_found = solutions_found;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>      ua.x = x;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>      ua.optimization_mode = optimization_mode;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    }</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>      <span class="keywordflow">return</span> best-&gt;extract(ua);</div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>    }</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>  }</div>
</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="comment"></span> </div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="comment">  /** If `is_extractable()` is not `true`, the returned element might not be an optimum, and should be seen as the best optimum found so far.</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span><span class="comment">  */</span></div>
<div class="foldopen" id="foldopen00318" data-start="{" data-end="}">
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a86272b36fce34557182e6bdee27aeba4">  318</a></span>  CUDA <span class="keyword">const</span> <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a54113a0d73ef95cf3b7d38667ef77c05">best_type</a>&amp; <a class="code hl_function" href="classlala_1_1_b_a_b.html#a86272b36fce34557182e6bdee27aeba4">optimum</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>    <span class="keywordflow">return</span> *best;</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>  }</div>
</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="foldopen" id="foldopen00322" data-start="{" data-end="}">
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a777970254ba9c06166a3ba4fa55cadec">  322</a></span>  CUDA <a class="code hl_typedef" href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">best_ptr</a> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a777970254ba9c06166a3ba4fa55cadec">optimum_ptr</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>    <span class="keywordflow">return</span> best;</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>  }</div>
</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span> </div>
<div class="foldopen" id="foldopen00326" data-start="{" data-end="}">
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">  326</a></span>  CUDA <span class="keywordtype">bool</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">is_minimization</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>    <span class="keywordflow">return</span> optimization_mode;</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>  }</div>
</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span> </div>
<div class="foldopen" id="foldopen00330" data-start="{" data-end="}">
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a2e04d3b131fea27d038d063250a5a191">  330</a></span>  CUDA <span class="keywordtype">bool</span> <a class="code hl_function" href="classlala_1_1_b_a_b.html#a2e04d3b131fea27d038d063250a5a191">is_maximization</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>    <span class="keywordflow">return</span> !optimization_mode;</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>  }</div>
</div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span> </div>
<div class="foldopen" id="foldopen00334" data-start="{" data-end="}">
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno"><a class="line" href="classlala_1_1_b_a_b.html#a57586195354024a61b9c05cdafe0e86b">  334</a></span>  CUDA AVar <a class="code hl_function" href="classlala_1_1_b_a_b.html#a57586195354024a61b9c05cdafe0e86b">objective_var</a>()<span class="keyword"> const </span>{</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    <span class="keywordflow">return</span> x;</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>  }</div>
</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>};</div>
</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span> </div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>}</div>
</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html"><div class="ttname"><a href="classlala_1_1_b_a_b.html">lala::BAB</a></div><div class="ttdef"><b>Definition</b> bab.hpp:27</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a06c807636032bee053d198de45e86caa"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a06c807636032bee053d198de45e86caa">lala::BAB::tell</a></div><div class="ttdeci">CUDA this_type &amp; tell(const typename best_type::universe_type &amp;best_bound, BInc&lt; Mem &gt; &amp;has_changed)</div><div class="ttdef"><b>Definition</b> bab.hpp:251</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a09358295526fd2dde7e24fa45c3a754e"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a09358295526fd2dde7e24fa45c3a754e">lala::BAB::deinterpret_best_bound</a></div><div class="ttdeci">CUDA TFormula&lt; Alloc2 &gt; deinterpret_best_bound(const Alloc2 &amp;alloc=Alloc2()) const</div><div class="ttdef"><b>Definition</b> bab.hpp:245</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a0b226f95cb1bde48b221f37b8c8356b0"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a0b226f95cb1bde48b221f37b8c8356b0">lala::BAB::solutions_count</a></div><div class="ttdeci">CUDA int solutions_count() const</div><div class="ttdef"><b>Definition</b> bab.hpp:291</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a0f7184a6e2b783cc8325fdfb1d229813"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a0f7184a6e2b783cc8325fdfb1d229813">lala::BAB::is_minimization</a></div><div class="ttdeci">CUDA bool is_minimization() const</div><div class="ttdef"><b>Definition</b> bab.hpp:326</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a1368cb2d5f3eda4acfb960b4f69de09f"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a1368cb2d5f3eda4acfb960b4f69de09f">lala::BAB::refine</a></div><div class="ttdeci">CUDA void refine(BInc&lt; Mem &gt; &amp;has_changed)</div><div class="ttdef"><b>Definition</b> bab.hpp:283</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a2085ebdfa6a8a9a1993a17c2caa128f1"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a2085ebdfa6a8a9a1993a17c2caa128f1">lala::BAB::sub_ptr</a></div><div class="ttdeci">abstract_ptr&lt; sub_type &gt; sub_ptr</div><div class="ttdef"><b>Definition</b> bab.hpp:31</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a269310af74a1427381d60bfbab3d1644"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a269310af74a1427381d60bfbab3d1644">lala::BAB::get_allocator</a></div><div class="ttdeci">CUDA allocator_type get_allocator() const</div><div class="ttdef"><b>Definition</b> bab.hpp:109</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a2e04d3b131fea27d038d063250a5a191"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a2e04d3b131fea27d038d063250a5a191">lala::BAB::is_maximization</a></div><div class="ttdeci">CUDA bool is_maximization() const</div><div class="ttdef"><b>Definition</b> bab.hpp:330</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a403fd4162929ffb06a297ec373486e36"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a403fd4162929ffb06a297ec373486e36">lala::BAB::iresult_ask</a></div><div class="ttdeci">IResult&lt; ask_type&lt; typename Env::allocator_type &gt;, F &gt; iresult_ask</div><div class="ttdef"><b>Definition</b> bab.hpp:65</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a52d692b00718e1681732044b066d1023"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a52d692b00718e1681732044b066d1023">lala::BAB::sub_type</a></div><div class="ttdeci">A sub_type</div><div class="ttdef"><b>Definition</b> bab.hpp:30</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a54113a0d73ef95cf3b7d38667ef77c05"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a54113a0d73ef95cf3b7d38667ef77c05">lala::BAB::best_type</a></div><div class="ttdeci">B best_type</div><div class="ttdef"><b>Definition</b> bab.hpp:32</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a57586195354024a61b9c05cdafe0e86b"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a57586195354024a61b9c05cdafe0e86b">lala::BAB::objective_var</a></div><div class="ttdeci">CUDA AVar objective_var() const</div><div class="ttdef"><b>Definition</b> bab.hpp:334</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a57d8e6938659398a9b0d09046f935923"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a57d8e6938659398a9b0d09046f935923">lala::BAB::allocator_type</a></div><div class="ttdeci">typename A::allocator_type allocator_type</div><div class="ttdef"><b>Definition</b> bab.hpp:29</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a6f3d8c8236ddc3b86ebf77df495f88ca"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a6f3d8c8236ddc3b86ebf77df495f88ca">lala::BAB::best_ptr</a></div><div class="ttdeci">abstract_ptr&lt; best_type &gt; best_ptr</div><div class="ttdef"><b>Definition</b> bab.hpp:33</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a777970254ba9c06166a3ba4fa55cadec"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a777970254ba9c06166a3ba4fa55cadec">lala::BAB::optimum_ptr</a></div><div class="ttdeci">CUDA best_ptr optimum_ptr() const</div><div class="ttdef"><b>Definition</b> bab.hpp:322</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a86272b36fce34557182e6bdee27aeba4"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a86272b36fce34557182e6bdee27aeba4">lala::BAB::optimum</a></div><div class="ttdeci">CUDA const best_type &amp; optimum() const</div><div class="ttdef"><b>Definition</b> bab.hpp:318</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a8b714495f2df448c45c1bdc9d125cb82"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a8b714495f2df448c45c1bdc9d125cb82">lala::BAB::BAB</a></div><div class="ttdeci">CUDA NI BAB(const BAB&lt; A2, B2 &gt; &amp;other, AbstractDeps&lt; Allocators... &gt; &amp;deps)</div><div class="ttdef"><b>Definition</b> bab.hpp:95</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a9276a66e78e07240a0f5f1290ed2d8dc"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a9276a66e78e07240a0f5f1290ed2d8dc">lala::BAB::extract</a></div><div class="ttdeci">CUDA void extract(AbstractBest &amp;ua) const</div><div class="ttdef"><b>Definition</b> bab.hpp:304</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a960f78b54419235c37c5cff7c34e3b2a"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a960f78b54419235c37c5cff7c34e3b2a">lala::BAB::aty</a></div><div class="ttdeci">CUDA AType aty() const</div><div class="ttdef"><b>Definition</b> bab.hpp:105</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a9887e0c3a6eea679ef8324887f4f4797"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a9887e0c3a6eea679ef8324887f4f4797">lala::BAB::deinterpret_best_bound</a></div><div class="ttdeci">CUDA NI TFormula&lt; Alloc2 &gt; deinterpret_best_bound(const typename best_type::universe_type &amp;best_bound, const Alloc2 &amp;alloc=Alloc2()) const</div><div class="ttdef"><b>Definition</b> bab.hpp:230</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_a9d275cd2a5ac04ac3d0054d00d975500"><div class="ttname"><a href="classlala_1_1_b_a_b.html#a9d275cd2a5ac04ac3d0054d00d975500">lala::BAB::compare_bound</a></div><div class="ttdeci">CUDA bool compare_bound(const Store1 &amp;store1, const Store2 &amp;store2) const</div><div class="ttdef"><b>Definition</b> bab.hpp:263</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_aac053c32befc6c9260b29db7769f66e2"><div class="ttname"><a href="classlala_1_1_b_a_b.html#aac053c32befc6c9260b29db7769f66e2">lala::BAB::BAB</a></div><div class="ttdeci">CUDA BAB(AType atype, sub_ptr sub, best_ptr best)</div><div class="ttdef"><b>Definition</b> bab.hpp:81</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_ab21624fe56e6c564ba6102741835ff2e"><div class="ttname"><a href="classlala_1_1_b_a_b.html#ab21624fe56e6c564ba6102741835ff2e">lala::BAB::iresult_tell</a></div><div class="ttdeci">IResult&lt; tell_type&lt; typename Env::allocator_type &gt;, F &gt; iresult_tell</div><div class="ttdef"><b>Definition</b> bab.hpp:62</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_ac33b3de5b64596a9094ef9d29dee1f26"><div class="ttname"><a href="classlala_1_1_b_a_b.html#ac33b3de5b64596a9094ef9d29dee1f26">lala::BAB::name</a></div><div class="ttdeci">static constexpr const char * name</div><div class="ttdef"><b>Definition</b> bab.hpp:67</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_ac9b35285040938ee7735f50ca7d4b083"><div class="ttname"><a href="classlala_1_1_b_a_b.html#ac9b35285040938ee7735f50ca7d4b083">lala::BAB::interpret_ask_in</a></div><div class="ttdeci">CUDA NI iresult_ask&lt; F, Env &gt; interpret_ask_in(const F &amp;f, Env &amp;env)</div><div class="ttdef"><b>Definition</b> bab.hpp:209</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_ad16c092f4c82e774039356b94d28d4ec"><div class="ttname"><a href="classlala_1_1_b_a_b.html#ad16c092f4c82e774039356b94d28d4ec">lala::BAB::interpret_tell_in</a></div><div class="ttdeci">CUDA NI iresult_tell&lt; F, Env &gt; interpret_tell_in(const F &amp;f, Env &amp;env)</div><div class="ttdef"><b>Definition</b> bab.hpp:202</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_aeaf2219142336c986ebef2e4eca225eb"><div class="ttname"><a href="classlala_1_1_b_a_b.html#aeaf2219142336c986ebef2e4eca225eb">lala::BAB::ask_type</a></div><div class="ttdeci">battery::vector&lt; typename sub_type::template ask_type&lt; Alloc2 &gt;, Alloc2 &gt; ask_type</div><div class="ttdef"><b>Definition</b> bab.hpp:59</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_aec5ab8e66756dac48599e2231b3d7b00"><div class="ttname"><a href="classlala_1_1_b_a_b.html#aec5ab8e66756dac48599e2231b3d7b00">lala::BAB::is_bot</a></div><div class="ttdeci">CUDA local::BDec is_bot() const</div><div class="ttdef"><b>Definition</b> bab.hpp:117</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_af293d61952fe2e9eab3fc1d1867996b0"><div class="ttname"><a href="classlala_1_1_b_a_b.html#af293d61952fe2e9eab3fc1d1867996b0">lala::BAB::is_top</a></div><div class="ttdeci">CUDA local::BInc is_top() const</div><div class="ttdef"><b>Definition</b> bab.hpp:113</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_af87d971b6c9bfebf4ebb2c5e38636312"><div class="ttname"><a href="classlala_1_1_b_a_b.html#af87d971b6c9bfebf4ebb2c5e38636312">lala::BAB::is_extractable</a></div><div class="ttdeci">CUDA bool is_extractable(const ExtractionStrategy &amp;strategy=ExtractionStrategy()) const</div><div class="ttdef"><b>Definition</b> bab.hpp:297</div></div>
<div class="ttc" id="aclasslala_1_1_b_a_b_html_afbcc5801a31324de4b4ebeb8c82ac0c4"><div class="ttname"><a href="classlala_1_1_b_a_b.html#afbcc5801a31324de4b4ebeb8c82ac0c4">lala::BAB::tell</a></div><div class="ttdeci">CUDA this_type &amp; tell(const tell_type&lt; Alloc &gt; &amp;t, BInc&lt; Mem &gt; &amp;has_changed)</div><div class="ttdef"><b>Definition</b> bab.hpp:216</div></div>
<div class="ttc" id="anamespacelala_html"><div class="ttname"><a href="namespacelala.html">lala</a></div><div class="ttdef"><b>Definition</b> bab.hpp:13</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html">lala::BAB::tell_type</a></div><div class="ttdef"><b>Definition</b> bab.hpp:37</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_a0986b184c880736f303ced708f056536"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#a0986b184c880736f303ced708f056536">lala::BAB::tell_type::tell_type</a></div><div class="ttdeci">CUDA NI tell_type(AVar x, bool opt, const Alloc2 &amp;alloc=Alloc2())</div><div class="ttdef"><b>Definition</b> bab.hpp:45</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_a4e83f2e08e2ce5225a046d7e2273617b"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#a4e83f2e08e2ce5225a046d7e2273617b">lala::BAB::tell_type::tell_type</a></div><div class="ttdeci">CUDA NI tell_type(const BABTellType &amp;other, const Alloc2 &amp;alloc=Alloc2())</div><div class="ttdef"><b>Definition</b> bab.hpp:49</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_a797438d0f1e11cd0d9ec4552a2b945cd"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#a797438d0f1e11cd0d9ec4552a2b945cd">lala::BAB::tell_type::sub_tell_type</a></div><div class="ttdeci">sub_type::template tell_type&lt; Alloc2 &gt; sub_tell_type</div><div class="ttdef"><b>Definition</b> bab.hpp:38</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_a8f1f922085e344b5c3c0b7db33112aa0"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#a8f1f922085e344b5c3c0b7db33112aa0">lala::BAB::tell_type::optimization_mode</a></div><div class="ttdeci">bool optimization_mode</div><div class="ttdef"><b>Definition</b> bab.hpp:40</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_aac4e6ab16c4725c4180a8498dfda6405"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#aac4e6ab16c4725c4180a8498dfda6405">lala::BAB::tell_type::tell_type</a></div><div class="ttdeci">tell_type(const tell_type&lt; Alloc2 &gt; &amp;)=default</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_ab083e1cc658b1761ebdbf361ffcf4b02"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#ab083e1cc658b1761ebdbf361ffcf4b02">lala::BAB::tell_type::tell_type</a></div><div class="ttdeci">tell_type(tell_type&lt; Alloc2 &gt; &amp;&amp;)=default</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_aba987b9b76a1bcb16223037ba06ea058"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#aba987b9b76a1bcb16223037ba06ea058">lala::BAB::tell_type::sub_tells</a></div><div class="ttdeci">battery::vector&lt; sub_tell_type, Alloc2 &gt; sub_tells</div><div class="ttdef"><b>Definition</b> bab.hpp:41</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_ada8349687c7028d006f88f493dd99402"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#ada8349687c7028d006f88f493dd99402">lala::BAB::tell_type::x</a></div><div class="ttdeci">AVar x</div><div class="ttdef"><b>Definition</b> bab.hpp:39</div></div>
<div class="ttc" id="astructlala_1_1_b_a_b_1_1tell__type_html_ae3494b3ccca077bbaf615b674e7434be"><div class="ttname"><a href="structlala_1_1_b_a_b_1_1tell__type.html#ae3494b3ccca077bbaf615b674e7434be">lala::BAB::tell_type::tell_type</a></div><div class="ttdeci">tell_type()=default</div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_22ec94e099ac4ca178246c6ac98c2d99.html">lala</a></li><li class="navelem"><a class="el" href="bab_8hpp.html">bab.hpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
