<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Lattice Land Book</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="CUDA-Battery.html"><strong aria-hidden="true">2.</strong> CUDA-Battery Library</a></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">Lattice Land Book</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Hello! You reached the <code>Lattice Land</code> book.
<code>Lattice land</code> is a collection of C++ libraries compatible with NVIDIA GPU.
Most of the library implements <em>abstract domains for constraint reasoning</em> a new kind of data structure based on <a href="https://en.wikipedia.org/wiki/Abstract_interpretation">abstract interpretation</a>, <a href="https://en.wikipedia.org/wiki/Lattice_(order)">lattice theory</a> and <a href="https://en.wikipedia.org/wiki/Constraint_satisfaction">constraint reasoning</a>.
This is a book presenting this project, the involved research papers and the code documentation.</p>
<p>This project is available on <a href="https://github.com/lattice-land">github</a>.</p>
<h2 id="documentation-of-libraries"><a class="header" href="#documentation-of-libraries">Documentation of libraries</a></h2>
<ul>
<li><a href="https://lattice-land.github.io/cuda-battery">cuda-battery</a>: Memory allocators, vector, utilities and more which run on both CPU and GPU (CUDA).
See also the chapter <a href="CUDA-Battery.html">CUDA-Battery Library</a>.</li>
<li><a href="https://lattice-land.github.io/lala-core">lala-core</a>: Core definitions of the formula AST and abstract domain.</li>
<li><a href="https://github.com/lattice-land/lattice-land.github.io">lattice-land.github.io</a>: The repository hosting this book and the libraries documentation.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cuda-battery-library"><a class="header" href="#cuda-battery-library">CUDA-Battery Library</a></h1>
<p>This library provides a number of data structures to ease the programming in CUDA.
Our goal is to support the development of various lattice data structures in our project &quot;Lattice Land&quot;.</p>
<p>Everything is under the namespace <code>battery::</code>.
The Doxygen documentation is available at <a href="https://lattice-land.github.io/cuda-battery">here</a>.</p>
<h2 id="allocator"><a class="header" href="#allocator">Allocator</a></h2>
<p><code>allocator.hpp</code> provides several allocators for CPU and GPU:</p>
<ol>
<li><em>Standard allocator</em>: Allocate in CPU's memory from host side using standard <code>malloc</code> and <code>free</code> functions (<code>StandardAllocator</code>).</li>
<li><em>Global allocator</em>: Allocate in GPU's global memory from host side (<code>GlobalAllocatorCPU</code>) and device side (<code>GlobalAllocatorGPU</code>).</li>
<li><em>Managed allocator</em>: Allocate in managed memory from host side (<code>ManagedAllocator</code>).</li>
<li><em>Shared allocator</em>: Allocate in a pool of memory from host or device side where memory is never freed (<code>PoolAllocator</code>), especially useful for dealing with shared memory in GPU.</li>
</ol>
<h2 id="memory"><a class="header" href="#memory">Memory</a></h2>
<p><code>memory.hpp</code> provides abstractions over various kinds of memory in terms of loads and stores, a memory usually carries an allocator too:</p>
<ol>
<li><em>Local sequential memory</em>: Accessed by only one thread and managed automatically (e.g., stored on the stack) (<code>LocalMemory</code>).</li>
<li><em>Unprotected memory</em>: Memory with unprotected load and store accesses, suppose to be accessed by only one thread and managed by an allocator (<code>Memory&lt;Allocator&gt;</code>).</li>
<li><em>Read-only memory</em>: Memory with only a load operation, managed by an allocator and can be accessed by several threads since the values are not supposed to change (<code>ReadOnlyMemory&lt;Allocator&gt;</code>).</li>
<li><em>Shared atomic memory</em>: Memory with atomic load and store operations, managed by an allocator and can be accessed by several threads (<code>AtomicMemory&lt;Allocator, memory_order&gt;</code>).
The <code>memory_order</code> defaults to the weakest memory consistency (relaxed) which is enough if you stay within the framework of the Lattice-Land project.</li>
<li><em>Shared GPU atomic memory</em>: Same than shared atomic memory, but with an additional scope of the memory:
<ul>
<li><code>AtomicMemoryBlock</code>: Memory can only be accessed within a block (shared memory).</li>
<li><code>AtomicMemoryDevice</code>: Memory can only be accessed in a single device (global memory).</li>
<li><code>AtomicMemorySystem</code>: Memory can be accessed from several devices.</li>
</ul>
</li>
</ol>
<h2 id="stl-data-structures"><a class="header" href="#stl-data-structures">STL data structures</a></h2>
<p>We provide various data structures that can be used on both the CPU and GPU, with the same code.
It means that you can write code once that run on both the CPU and GPU.</p>
<p>Your code <em>will not be parallelized or optimized for GPU</em>.
Basically, if you ask for a vector, it will be the same on CPU and GPU, the parallelism and memory accesses protection are left to you (unless explicitely mentioned).</p>
<ul>
<li>Vector <code>vector&lt;T, Allocator&gt;</code>.</li>
<li>Shared pointer <code>shared_ptr&lt;T, Allocator&gt;</code>.</li>
<li>Unique pointer <code>unique_ptr&lt;T, Allocator&gt;</code>.</li>
<li>String <code>string&lt;Allocator&gt;</code> (non-resizable and null-terminated).</li>
<li>Tuple <code>tuple&lt;T1, ..., Tn&gt;</code>, depending on the compiler used (e.g., nvcc or gcc), it includes <code>cuda::std::tuple</code> or <code>std::tuple</code>.</li>
<li>Variant <code>variant&lt;T1, ..., Tn&gt;</code>.</li>
</ul>
<p>Moreover, we provide a variant of <code>bitset</code> parametrized by a memory:</p>
<ul>
<li><code>bitset&lt;N, Mem, T&gt;</code> is a bitset of size <code>N * sizeof(T)</code> where the elements of the underlying array are stored depending on the <code>Mem</code> policy (e.g., either as atomics or not).</li>
</ul>
<h2 id="utility"><a class="header" href="#utility">Utility</a></h2>
<p>Provide unified functions that either forward the call to the standard library if called on host, or to the CUDA primitives when available if called on device.
Some functions are reimplemented from scratch to provide them on GPU.</p>
<ul>
<li><em>Utility/arithmetic functions</em>: <code>swap</code>, <code>min</code>, <code>max</code>, <code>signum</code>, <code>ipow</code>.</li>
<li><em>String functions</em>: <code>strlen</code>, <code>strcmp</code>.</li>
<li><em>Floating-point functions</em>: <code>isnan</code>, <code>nextafter</code>, <code>add_up</code>, <code>add_down</code>, <code>sub_up</code>, <code>sub_down</code>, <code>mul_up</code>, <code>mul_down</code>, <code>div_up</code>, <code>div_down</code>.</li>
<li><em>Bits-level functions</em>: <code>popcount</code>, <code>countl_zero</code>, <code>countl_one</code>, <code>countr_zero</code>, <code>countr_one</code>.</li>
</ul>
<h3 id="infinities"><a class="header" href="#infinities">Infinities</a></h3>
<p>For the purposes of Lattice-Land, we often need to represent infinities of primitive types, these are given by <code>Limits&lt;T&gt;::bot()</code> for the smallest element and <code>Limits&lt;T&gt;::top()</code> for the largest element.
For floating-point numbers, it returns infinities, and for integers it returns the smallest/largest element representable.
When applicable, we usually consider that <code>MIN_INT</code> and <code>MAX_INT</code> (or equivalent) are special elements modeling infinities for integer types.
This is especially important for the casting rules below.</p>
<h3 id="casting-functions"><a class="header" href="#casting-functions">Casting functions</a></h3>
<p>We provide functions to cast primitive types to other types according to a rounding mode.</p>
<ul>
<li><code>ru_cast&lt;To, From&gt;</code>: cast the value of type <code>To</code> to a value of type <code>From</code>, it is guaranteed that the casted value is greater or equal to the input value.
In other terms, when the casted value is not exactly representable (e.g., <code>float</code> to <code>int</code>) we round towards infinity.</li>
<li><code>rd_cast&lt;To, From&gt;</code>: Same as <code>ru_cast</code> but rounds towards negative infinity.</li>
</ul>
<p>Some things to know about these functions:</p>
<ul>
<li><em>Infinities</em> are preserved, e.g., <code>MAX_INT</code> is mapped to the floating-point infinity value.</li>
<li><em>Overflow and underflow</em>: nothing special is done.</li>
<li><em>Rounding mode</em>: on CPU, we use the rounding mode to perform conversion with floating-point numbers. /!\ It is not reinitialized to the rounding mode before the call was made.</li>
<li><code>utility_test_cpu_gpu</code> tests whether the rounding functions behaves the same on CPU and GPU.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
